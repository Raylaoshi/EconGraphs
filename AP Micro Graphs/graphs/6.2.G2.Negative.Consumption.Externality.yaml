title: Negative Consumption Externality
title_zh: 消费负外部性
label: 6.2.G2
eyebrow: Unit 6 — Market Failure and the Role of Government
eyebrow_zh: 第六单元 — 市场失灵与政府治理
description: |
description_zh: |

schema: EconSchema
params:
  - {name: showTotalExternalCost, value: false}
  - {name: showTolerableExternalCost, value: false}
  - {name: showDemandCurve, value: true}
  - {name: MEC, value: 40, min: 30, max: 50, round: 1}
  - {name: tax, value: 0, min: 0, max: 50, round: 1}

calcs:
  # MSB intercept
  MSBIntercept: (120 - (params.MEC))

  # Taxed demand shifts DOWN by tax: (120-tax-Q) = Q → Q = (120-tax)/2
  taxedQ: ((120 - (params.tax)) / 2)
  taxedP: ((120 - (params.tax)) / 2)

  # Social optimum (MSB = MSC)
  socialQ: ((calcs.MSBIntercept) / 2)
  socialP: ((calcs.MSBIntercept) / 2)

  # MPB, MSB, MSC at taxed market output
  MPB_at_market: (120 - (calcs.taxedQ))
  MSB_at_market: ((calcs.MSBIntercept) - (calcs.taxedQ))
  MSC_at_market: (calcs.taxedQ)

  # Overconsumption from taxed equilibrium to social optimum
  overconsumption: ((calcs.taxedQ) - (calcs.socialQ))

layout:
  OneGraphPlusSidebar:
    graph:
      xAxis:
        title: Quantity
        max: 100
        ticks: 10
      yAxis:
        title: Price
        max: 120
        min: 0
        ticks: 6
      objects:
        # Taxed Demand = MPB - tax — draggable
        - Line:
            yIntercept: (120 - (params.tax))
            slope: -1
            color: blue
            strokeWidth: 3
            drag:
              - vertical: tax
            label:
              text: "`D_{Tax}`"
              x: 90
              position: b
            show: (params.showDemandCurve)

        # Original Demand = MPB — dotted, shown by checkbox
        - Line:
            yIntercept: 120
            slope: -1
            color: blue
            strokeWidth: 2
            lineStyle: dotted
            show: (params.showDemandCurve)
            label:
              text: "`D = MPB`"
              x: 90
              position: b

        # Supply = MPC = MSC
        - Line:
            yIntercept: 0
            slope: 1
            color: orange
            strokeWidth: 3
            label:
              text: "`S = MPC = MSC`"
              x: 90
              position: bl

        # MSB = MPB - MEC
        - Line:
            yIntercept: (calcs.MSBIntercept)
            slope: -1
            color: green
            strokeWidth: 3
            drag:
              - vertical: MEC
            label:
              text: MSB
              x: 75
              position: t

        # MEC arrow at taxedQ — from MPB down to MSB
        - Segment:
            a: [(calcs.taxedQ), (calcs.MPB_at_market)]
            b: [(calcs.taxedQ), (calcs.MSB_at_market)]
            color: red
            strokeWidth: 2
            lineStyle: solid
            endArrow: true
            startArrow: true
            trim: 0.05
            label:
              text: MEC
              fontSize: 11
              position: l
              bgcolor: none

        # Tax arrow at socialQ — from taxed MPB up to original MPB
        - Segment:
            a: [(calcs.socialQ), (120 - (params.tax) - (calcs.socialQ))]
            b: [(calcs.socialQ), (120 - (calcs.socialQ))]
            color: purple
            strokeWidth: 2
            lineStyle: solid
            endArrow: true
            startArrow: true
            trim: 0.05
            show: (params.tax) > 0
            label:
              text: "`Tax = ${params.tax.toFixed(0)}`"
              fontSize: 10
              position: r
              bgcolor: none

        # Tolerable External Cost (0 to Q*)
        - Area:
            fn1: 120 - (x)
            fn2: (calcs.MSBIntercept) - (x)
            min: 0
            max: (calcs.socialQ)
            color: green
            opacity: 0.4
            show: (params.showTolerableExternalCost)

        # Tolerable External Cost Label
        - Label:
            coordinates: [(calcs.socialQ / 2), (120 - (calcs.socialQ / 2) - (params.MEC / 2))]
            text: \text{Tolerable EC}
            color: green
            fontSize: 11
            bgcolor: none
            show: (params.showTolerableExternalCost)

        # EC Incurred (0 to taxedQ) — shrinks as tax increases
        - Area:
            fn1: 120 - (x)
            fn2: (calcs.MSBIntercept) - (x)
            min: 0
            max: (calcs.taxedQ)
            color: orange
            opacity: 0.3
            show: (params.showTotalExternalCost)

        # EC Incurred Label
        - Label:
            coordinates: [(calcs.taxedQ / 2), (120 - (calcs.taxedQ / 2) - (params.MEC / 2))]
            text: \text{EC Incurred}
            color: orange
            fontSize: 11
            bgcolor: none
            show: (params.showTotalExternalCost)

        # DWL triangle (overconsumption from socialQ to taxedQ)
        - Area:
            fn1: (calcs.MSBIntercept) - (x)
            fn2: (x)
            min: (calcs.socialQ)
            max: (calcs.taxedQ)
            color: red
            opacity: 0.2

        # DWL Label
        - Label:
            coordinates: [((calcs.socialQ + calcs.taxedQ) / 2 + 1), (calcs.socialP)]
            text: DWL
            color: red
            fontSize: 11
            bgcolor: none
            show: (calcs.taxedQ) != (calcs.socialQ)

        # Overconsumption arrow (from socialQ to taxedQ)
        - Segment:
            a: [(calcs.socialQ),5]
            b: [(calcs.taxedQ), 5]
            color: grey
            strokeWidth: 2
            lineStyle: dotted
            endArrow: true
            startArrow: true
            trim: 0.05
            show: (calcs.overconsumption) > 0.5
            label:
              text: "`Overconsumption = ${calcs.overconsumption.toFixed(0)}`"
              position: b
              fontSize: 10
              bgcolor: none
        # Social optimum point
        - Point:
            coordinates: [(calcs.socialQ), (calcs.socialP)]
            color: green
            droplines:
              vertical: "`Q_{So} = ${calcs.socialQ.toFixed(0)}`"
        # Original private equilibrium — faded when tax > 0
        - Point:
            coordinates: [60, 60]
            color: grey
            opacity: 0.3
            show: (params.tax) > 0
            droplines:
              vertical: "`Q_{no tax} = 60`"

        # Market equilibrium with tax
        - Point:
            coordinates: [(calcs.taxedQ), (calcs.taxedP)]
            color: orange
            droplines:
              vertical: "`Q_{MKT} = ${calcs.taxedQ.toFixed(0)}`"
              horizontal: "`P_{MKT} = ${calcs.taxedP.toFixed(0)}`"

        # Private equilibrium — shown when tax = 0
        - Point:
            coordinates: [60, 60]
            color: grey
            show: (params.tax) == 0
            droplines:
              vertical: "`Q_{MKT} = 60`"
              horizontal: "`P_{MKT} = 60`"

        # MSB at taxed market output
        - Point:
            coordinates: [(calcs.taxedQ), (calcs.MSB_at_market)]
            color: green
            r: 4
            label:
              text: "`MSB = ${calcs.MSB_at_market.toFixed(0)}`"
              position: l
              fontSize: 10
              bgcolor: none

        # MSC at taxed market output
        - Point:
            coordinates: [(calcs.taxedQ), (calcs.MSC_at_market)]
            color: orange
            r: 4
            label:
              text: "`MSC = ${calcs.MSC_at_market.toFixed(0)}`"
              position: l
              fontSize: 10
              bgcolor: none

    sidebar:
      controls:
        - title: Negative Consumption Externality
          sliders:
            - param: MEC
              label: \text{MEC}
            - param: tax
              label: \text{Tax}
          checkboxes:
            - param: showDemandCurve
              label: \text{Show Original Demand}
            - param: showTotalExternalCost
              label: \text{Show External Cost Incurred}
            - param: showTolerableExternalCost
              label: \text{Show Tolerable External Cost}
          divs:
            - html: "`<hr/><b>Market Equilibrium:</b>`"
            - html: "`Q<sub>MKT</sub> = ${calcs.taxedQ.toFixed(0)}, P<sub>MKT</sub> = ${calcs.taxedP.toFixed(0)}`"
            - html: "`MSB = ${calcs.MSB_at_market.toFixed(0)}, MSC = ${calcs.MSC_at_market.toFixed(0)}`"
            - html: "`<hr/><b>Social Optimum:</b> Q<sub>So</sub> = ${calcs.socialQ.toFixed(0)}`"
            - html: "`<hr/><b>Policy:</b>`"
            - html: "`Current tax = $${params.tax.toFixed(0)}`"
            - html: "`Optimal tax = $${params.MEC.toFixed(0)}`"
            - html: "`Remaining overconsumption = ${calcs.overconsumption.toFixed(0)} units`"
            - html: "`<hr/><b>External Costs:</b>`"
            - html: "`<span style=\"color:orange\">Orange area</span> - External cost incurred at Q<sub>MKT</sub>`"
            - html: "`<span style=\"color:green\">Green area</span> - Tolerable external cost at Q<sub>So</sub>`"
            - html: "`<span style=\"color:red\">Red triangle</span> - Deadweight loss from overconsumption`"
            - html: "`<hr/><i>Example - Smoking. Set tax = MEC to eliminate DWL!</i>`"